version: "3.7"
services:
  big-bear-romm:
    image: rommapp/romm:4.3.2
    environment:
      - DB_HOST=big-bear-rommdb
      - DB_PORT=3306
      - DB_USER=romm-user
      - DB_NAME=romm
      - DB_PASSWD=casaos
      - ROMM_AUTH_SECRET_KEY=<secret key>
      - IGDB_CLIENT_ID=<igdb client id>
      - IGDB_CLIENT_SECRET=<igdb client secret>
      - MOBYGAMES_API_KEY=<moby api key>
      - STEAMGRIDDB_API_KEY=<sgdb api key>
      - SCREENSCRAPER_USER=<screenscraper user>
      - SCREENSCRAPER_PASSWORD=<screenscraper password>
      - RETROACHIEVEMENTS_API_KEY=<retroachievements api key>
      - HASHEOUS_API_ENABLED=true
      - ENABLE_RESCAN_ON_FILESYSTEM_CHANGE=true
      - ENABLE_SCHEDULED_RESCAN=true
      - ENABLE_SCHEDULED_UPDATE_SWITCH_TITLEDB=true
    volumes:
      - "${APP_DATA_DIR}/resources:/romm/resources"
      - "${APP_DATA_DIR}/redis-data:/redis-data"
      - "${APP_DATA_DIR}/library:/romm/library"
      - "${APP_DATA_DIR}/assets:/romm/assets"
      - "${APP_DATA_DIR}/config:/romm/config"
      - "${APP_DATA_DIR}/logs:/romm/logs"
    depends_on:
      - big-bear-rommdb
    restart: "unless-stopped"
    networks:
      - big-bear-romm-network
  big-bear-rommdb:
    image: mariadb:latest
    environment:
      - MYSQL_ROOT_PASSWORD=casaos
      - MYSQL_DATABASE=romm
      - MYSQL_USER=romm-user
      - MYSQL_PASSWORD=casaos
    volumes:
      - ${APP_DATA_DIR}/mysql:/var/lib/mysql
    restart: "unless-stopped"
    networks:
      - big-bear-romm-network
  app_proxy:
    environment:
      APP_HOST: big-bear-umbrel-romm_big-bear-romm_1
      APP_PORT: "8080"
networks:
  big-bear-romm-network:
    driver: bridge
