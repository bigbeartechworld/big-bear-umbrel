# big-bear-pterodactyl-wings configuration
name: big-bear-pterodactyl-wings
# Services section that specifies how the different services should be run
services:
  # This is the main app service for Pterodactyl Wings
  app:
    # Name of the container
    container_name: pterodactyl-wings
    # Docker image to use for the container
    image: ghcr.io/pterodactyl/wings:v1.11.13
    # Determines the restart policy. In this case, the container will always restart if it stops.
    restart: always
    # Maps the host's port 2022 to the container's port 2022
    ports:
      - "8080:8080"
      - "2022:2022"
    # Allocate a pseudo-TTY, making it act like a terminal
    tty: true
    # Set environment variables for the container
    environment:
      # Set the timezone to UTC
      TZ: "UTC"
      # Set the User ID for the Wings process
      WINGS_UID: 988
      # Set the Group ID for the Wings process
      WINGS_GID: 988
      # Set the username for the Wings process
      WINGS_USERNAME: pterodactyl
    # Mount paths from the host into the container
    volumes:
      # Mount the Docker socket, allowing the container to communicate with the host's Docker daemon
      - "/var/run/docker.sock:/var/run/docker.sock"
      # Mount the Docker containers directory
      - "/var/lib/docker/containers/:/var/lib/docker/containers/"
      # Mount the SSL certificates in read-only mode
      - "/etc/ssl/certs:/etc/ssl/certs:ro"
      # Mount a temporary directory for Pterodactyl
      - "/tmp/pterodactyl:/tmp/pterodactyl/"
      # Mount the configuration directory for Pterodactyl
      - "/etc/pterodactyl:/etc/pterodactyl/"
      # Mount the logs directory for Pterodactyl
      - "/var/log/pterodactyl:/var/log/pterodactyl/"
      # Mount the library directory for Pterodactyl
      - "/var/lib/pterodactyl:/var/lib/pterodactyl/"
  app_proxy:
    environment:
      APP_HOST: big-bear-umbrel-pterodactyl-wings_app_1
      APP_PORT: "8128"
