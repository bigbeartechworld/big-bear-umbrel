
version: "3.7"
services:
  big-bear-plex-nvidia:
    image: linuxserver/plex:1.42.2
    environment:
      - PUID=1000 # specify the user id
      - PGID=1000 # specify the group id
      - TZ=Etc/UTC # specify a timezone to use.
      - VERSION=docker # Set whether to update plex or not.
      - PLEX_CLAIM= #optional Optionally you can obtain a claim token from https://plex.tv/claim and input here. Keep in mind that the claim tokens expire within 4 minutes.
      - CPU_FALLBACK=true # Optional, only if you have a GPU
      - NVIDIA_VISIBLE_DEVICES=all # Optional, only if you have a GPU
    restart: unless-stopped
    volumes:
      - ${APP_DATA_DIR}/config:/config
      - ${APP_DATA_DIR}/tv:/tv
      - ${APP_DATA_DIR}/movies:/movies
    devices:
      - /dev/dri:/dev/dri # Optional, only if you have a GPU
      - /dev/dvb:/dev/dvb # Optional, only if you have a DVB card
    deploy:
      resources:
        reservations:
          memory: "256M"
          devices:
            - capabilities:
                - gpu
  app_proxy:
    environment:
      APP_HOST: big-bear-umbrel-plex-nvidia_big-bear-plex-nvidia_1
      APP_PORT: "32400"
