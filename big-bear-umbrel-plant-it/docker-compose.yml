
version: "3.7"
services:
  big-bear-plant-it:
    image: msdeluise/plant-it-server:0.10.0
    restart: unless-stopped
    environment:
      - MYSQL_HOST=big-bear-plant-it-db
      - MYSQL_PORT=3306
      - MYSQL_USERNAME=root
      - MYSQL_PSW=9c75c563-b549-40e6-a0d2-360cf9a962ea
      - MYSQL_DATABASE=plantit
      - MYSQL_ROOT_PASSWORD=9c75c563-b549-40e6-a0d2-360cf9a962ea
      - JWT_SECRET=putTheSecretHere
      - JWT_EXP=1
      - USERS_LIMIT=-1
      - UPLOAD_DIR=/upload-dir
      - API_PORT=8080
      - TREFLE_KEY=
      - LOG_LEVEL=DEBUG
      - ALLOWED_ORIGINS=*
      - CACHE_TTL=86400
      - CACHE_HOST=big-bear-plant-it-cache
      - CACHE_PORT=6379
      - SSL_ENABLED=false
      - CERTIFICATE_PATH=/certificates/
    volumes:
      - "${APP_DATA_DIR}/upload-dir:/upload-dir"
      - "${APP_DATA_DIR}/certificates:/certificates"
    networks:
      - big_bear_plant_it_network
  big-bear-plant-it-db:
    image: mysql:8.0
    restart: always
    environment:
      - MYSQL_DATABASE=plantit
      - MYSQL_ROOT_PASSWORD=9c75c563-b549-40e6-a0d2-360cf9a962ea
    volumes:
      - "${APP_DATA_DIR}/mysql:/var/lib/mysql"
    networks:
      - big_bear_plant_it_network
  big-bear-plant-it-cache:
    image: redis:7.2.11@sha256:9c44a721d444690605ffa32d6b6e1ac565060676386f88bbbb376f56cef2f724
    restart: always
    networks:
      - big_bear_plant_it_network
  app_proxy:
    environment:
      APP_HOST: big-bear-umbrel-plant-it_big-bear-plant-it_1
      APP_PORT: "8080"
networks:
  big_bear_plant_it_network:
    driver: bridge
