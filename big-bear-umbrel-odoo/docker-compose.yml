
version: "3.7"
services:
  big-bear-odoo:
    image: odoo:19 # Docker image for Odoo version 17
    restart: unless-stopped # Restart policy to ensure service recovery
    user: root # Specifies running the container as root
    volumes:
      - ${APP_DATA_DIR}/data/etc:/etc/odoo # Mounts Odoo configuration files
      - ${APP_DATA_DIR}/data/addons:/mnt/extra-addons # Mounts additional Odoo addons
    environment:
      - HOST=big-bear-odoo-db # Database host
      - USER=odoo # Database username
      - PASSWORD=a8d785b6-bc00-49cc-8675-d404093d1507 # Database password
    networks:
      - big_bear_odoo_network # Specifies network attachment for internal communication
  big-bear-odoo-db:
    image: postgres:15 # PostgreSQL version 15 Docker image
    user: root # Runs as root user
    environment:
      - POSTGRES_USER=odoo # Database user
      - POSTGRES_PASSWORD=a8d785b6-bc00-49cc-8675-d404093d1507 # Database password
      - POSTGRES_DB=postgres # Database name
    restart: unless-stopped # Restart policy for the database
    volumes:
      - ${APP_DATA_DIR}/data/postgresql:/var/lib/postgresql/data # Mounts PostgreSQL data directory
    networks:
      - big_bear_odoo_network # Attached network for internal communication
  app_proxy:
    environment:
      APP_HOST: big-bear-umbrel-odoo_big-bear-odoo_1
      APP_PORT: "8069"
networks:
  big_bear_odoo_network:
    driver: bridge # Specifies network driver as bridge
