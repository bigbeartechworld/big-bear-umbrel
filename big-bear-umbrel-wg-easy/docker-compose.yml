# Configuration for wg-easy setup

# Name of the big-bear-wg-easy application
# Service definitions for the big-bear-wg-easy application
services:
  # Service name: big-bear-wg-easy
  # The `big-bear-wg-easy` service definition
  big-bear-wg-easy:
    # Name of the container
    container_name: big-bear-wg-easy
    # Image to be used for the container
    image: ghcr.io/wg-easy/wg-easy:14
    # Container restart policy
    restart: unless-stopped
    # Environment variables for the container
    environment:
      WG_HOST: "[YOUR_PUBLIC_IP]"
      PASSWORD_HASH: "$2b$12$coPqCsPtcFO.Ab99xylBNOW4.Iu7OOA2/ZIboHN6/oyxca3MWo7fW"
      WG_DEFAULT_DNS: "1.1.1.1"
      WG_ALLOWED_IPS: 0.0.0.0/0, ::/0
    # capabilities to be added to the container
    cap_add:
      - NET_ADMIN
      - SYS_MODULE
    # sysctls to be added to the container
    sysctls:
      - net.ipv4.conf.all.src_valid_mark=1
      - net.ipv4.ip_forward=1
    # Volumes to be mounted to the container
    volumes:
      # Mounting the local ${APP_DATA_DIR}/data directory to /etc/wireguard inside the container
      - ${APP_DATA_DIR}/data:/etc/wireguard
    # Ports mapping between host and container
    ports:
      - 51820:51820/udp
      - 51821:51821/tcp # UI port
  app_proxy:
    environment:
      APP_HOST: big-bear-umbrel-wg-easy_big-bear-wg-easy_1
      APP_PORT: "51820"
