
version: "3.7"
services:
  zipline:
    image: ghcr.io/diced/zipline:3.7.13
    restart: unless-stopped
    volumes:
      - "${APP_DATA_DIR}/uploads:/zipline/uploads"
      - "${APP_DATA_DIR}/public:/zipline/public"
    environment:
      - CORE_RETURN_HTTPS=false
      - CORE_SECRET=changeme
      - CORE_HOST=0.0.0.0
      - CORE_PORT=3000
      - CORE_DATABASE_URL=postgres://postgres:postgrespassword@zipline-db/zipline
      - CORE_LOGGER=true
    networks:
      - zipline_network
  zipline-db:
    image: postgres:15
    restart: unless-stopped
    environment:
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=postgrespassword
      - POSTGRES_DATABASE=zipline
    volumes:
      - ${APP_DATA_DIR}/postgres:/var/lib/postgresql/data
    networks:
      - zipline_network
  app_proxy:
    environment:
      APP_HOST: big-bear-umbrel-zipline_zipline_1
      APP_PORT: "3000"
networks:
  zipline_network:
    driver: bridge
